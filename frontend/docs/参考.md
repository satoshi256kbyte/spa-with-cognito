タスク	説明	必要なスキル
依存関係をインストールします。

aws-amplify および @aws-amplify/ui-react パッケージをインストールするには、アプリケーションのルートディレクトリから次のコマンドを実行します。


npm i @aws-amplify/ui-react aws-amplify
アプリ開発者
ユーザープールを設定します。

次の例に基づいて、 aws-exports.js ファイルを作成し、 srcフォルダに保存します。ファイルには、次の情報が含まれている必要があります。

AWS リージョン Amazon Cognito ユーザープールが

Amazon Cognito ユーザープール ID

アプリクライアント ID


// replace the user pool region, id, and app client id details
const awsmobile = {
    "aws_project_region": "put_your_region_here",
    "aws_cognito_region": "put_your_region_here",
    "aws_user_pools_id": "put_your_user_pool_id_here",
    "aws_user_pools_web_client_id": "put_your_user_pool_app_id_here"
}

export default awsmobile;
アプリ開発者
Amplify サービスをインポートして設定します。

アプリケーションのエントリポイントファイル ( などApp.js) で、次のコード行を入力してaws-exports.jsファイルをインポートしてロードします。


import { Amplify } from 'aws-amplify';
import awsExports from './aws-exports';
次の例に基づいて、 aws-exports.js ファイルを使用して Amplify クライアントを設定します。


// Configure Amplify in index file or root file
Amplify.configure({ ...awsExports });
詳細については、Amplify ドキュメントの「Amplify カテゴリを設定する」を参照してください。

アプリ開発者
Authenticator UI コンポーネントを追加します。

Authenticator UI コンポーネントを表示するには、アプリケーションのエントリポイントファイル (App.js) に次のコード行を追加します。


import { Authenticator } from '@aws-amplify/ui-react';
import '@aws-amplify/ui-react/styles.css';
注記
サンプルコードスニペットは、UI Authenticator コンポーネントと Amplify UI styles.css ファイルをインポートします。これは、コンポーネントの事前構築されたテーマを使用するときに必要です。

UI コンポーネントには 2 Authenticator つの戻り値があります。

ユーザー詳細

ユーザーをサインアウトするために呼び出すことができる関数

次のコンポーネント例を参照してください。


function App() {
    return (
        <Authenticator>
            {({ signOut, user }) => (
                <div>
                    <p>Welcome {user.username}</p>
                    <button onClick={signOut}>Sign out</button>
                </div>
            )}
        </Authenticator>
    );
}
注記
App.js ファイル例については、このパターンの追加情報「追加情報」セクションを参照してください。

アプリ開発者
(オプション) セッション情報を取得します。

ユーザーが認証されると、AAmplify クライアントからセッションに関するデータを取得できます。たとえば、ユーザーのセッションから JSON Web トークン (JWT) を取得して、そのユーザーのセッションからバックエンド API への要求を認証できます。

JWT を含む要求ヘッダーの次の例を参照してください。


import { fetchAuthSession } from 'aws-amplify/auth';
(await fetchAuthSession()).tokens?.idToken?.toString();